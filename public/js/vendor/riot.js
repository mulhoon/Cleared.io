
/* Riot v2.0.12, @license MIT, (c) 2015 Muut Inc. + contributors */
(function(){var e={version:"v2.0.12",settings:{}};"use strict";e.observable=function(e){e=e||{};var t={},n=0;e.on=function(i,r){if(typeof r=="function"){r._id=typeof r._id=="undefined"?n++:r._id;i.replace(/\S+/g,function(e,n){(t[e]=t[e]||[]).push(r);r.typed=n>0})}return e};e.off=function(n,i){if(n=="*")t={};else{n.replace(/\S+/g,function(e){if(i){var n=t[e];for(var r=0,u;u=n&&n[r];++r){if(u._id==i._id){n.splice(r,1);r--}}}else{t[e]=[]}})}return e};e.one=function(t,n){if(n)n.one=1;return e.on(t,n)};e.trigger=function(n){var i=[].slice.call(arguments,1),r=t[n]||[];for(var u=0,o;o=r[u];++u){if(!o.busy){o.busy=1;o.apply(e,o.typed?[n].concat(i):i);if(o.one){r.splice(u,1);u--}else if(r[u]!==o){u--}o.busy=0}}return e};return e};(function(e,t){if(!this.top)return;var n=location,i=e.observable(),r=window,u;function o(){return n.hash.slice(1)}function f(e){return e.split("/")}function a(e){if(e.type)e=o();if(e!=u){i.trigger.apply(null,["H"].concat(f(e)));u=e}}var c=e.route=function(e){if(e[0]){n.hash=e;a(e)}else{i.on("H",e)}};c.exec=function(e){e.apply(null,f(o()))};c.parser=function(e){f=e};r.addEventListener?r.addEventListener(t,a,false):r.attachEvent("on"+t,a)})(e,"hashchange");var t=function(t,n,i){return function(r){n=e.settings.brackets||t;if(i!=n)i=n.split(" ");return r&&r.test?n==t?r:RegExp(r.source.replace(/\{/g,i[0].replace(/(?=.)/g,"\\")).replace(/\}/g,i[1].replace(/(?=.)/g,"\\")),r.global?"g":""):i[r]}}("{ }");var n=function(){var e={},n=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(t,n){return t&&(e[t]=e[t]||i(t))(n)};function i(e,n){e=(e||t(0)+t(1)).replace(t(/\\{/g),"￰").replace(t(/\\}/g),"￱");n=o(e,t(/{[\s\S]*?}/g));return new Function("d","return "+(!n[0]&&!n[2]&&!n[3]?r(n[1]):"["+n.map(function(e,t){return t%2?r(e,true):'"'+e.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")').replace(/\uFFF0/g,t(0)).replace(/\uFFF1/g,t(1))+";")}function r(e,n){e=e.replace(/\n/g," ").replace(t(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),"");return/^\s*[\w- "']+ *:/.test(e)?"["+e.replace(/\W*([\w- ]+)\W*:([^,]+)/g,function(e,t,n){return n.replace(/[^&|=!><]+/g,u)+'?"'+t.trim()+'":"",'})+'].join(" ").trim()':u(e,n)}function u(e,t){e=e.trim();return!e?"":"(function(v){try{v="+(e.replace(n,function(e,t,n){return n?"(d."+n+"===undefined?window."+n+":d."+n+")":e})||"x")+"}finally{return "+(t===true?'!v&&v!==0?"":v':"v")+"}}).call(d)"}function o(e,t){var n=[],i=0;e.replace(t,function(t,r){n.push(e.slice(i,r),t);i=r+t.length});return n.concat(e.slice(i))}}();function i(e){var n={val:e},i=e.split(/\s+in\s+/);if(i[1]){n.val=t(0)+i[1];i=i[0].slice(t(0).length).trim().split(/,\s*/);n.key=i[0];n.pos=i[1]}return n}function r(e,t,n){var i={};i[e.key]=t;if(e.pos)i[e.pos]=n;return i}function u(e,t,u){d(e,"each");var o=e.outerHTML,f=e.previousSibling,c=e.parentNode,l=[],s=[],v;u=i(u);function m(e,t,n){l.splice(e,0,t);s.splice(e,0,n)}t.one("update",function(){c.removeChild(e)}).one("premount",function(){if(c.stub)c=t.root}).on("update",function(){var e=n(u.val,t);if(!e)return;if(!Array.isArray(e)){var i=JSON.stringify(e);if(i==v)return;v=i;p(s,function(e){e.unmount()});l=[];s=[];e=Object.keys(e).map(function(t){return r(u,t,e[t])})}p(h(l,e),function(e){var t=l.indexOf(e),n=s[t];if(n){n.unmount();l.splice(t,1);s.splice(t,1)}});var d=c.childNodes,g=[].indexOf.call(d,f);p(e,function(n,i){var f=e.indexOf(n,i),p=l.indexOf(n,i);f<0&&(f=e.lastIndexOf(n,i));p<0&&(p=l.lastIndexOf(n,i));if(p<0){if(!v&&u.key)n=r(u,n,f);var h=new a({tmpl:o},{before:d[g+1+f],parent:t,root:c,item:n});h.mount();return m(f,n,h)}if(u.pos&&s[p][u.pos]!=f){s[p].one("update",function(e){e[u.pos]=f});s[p].update()}if(f!=p){c.insertBefore(d[g+p+1],d[g+f+1]);return m(f,l.splice(p,1)[0],s.splice(p,1)[0])}});l=e.slice()})}function o(e,t,n){g(e,function(e){if(e.nodeType==1){var i=x(e);if(i&&!e.getAttribute("each")){var r=new a(i,{root:e,parent:t});t.tags[e.getAttribute("name")||i.name]=r;n.push(r)}p(e.attributes,function(n){if(/^(name|id)$/.test(n.name))t[n.value]=e})}})}function f(e,n,i){function r(e,n,r){if(n.indexOf(t(0))>=0){var u={dom:e,expr:n};i.push(v(u,r))}}g(e,function(e){var t=e.nodeType;if(t==3&&e.parentNode.tagName!="STYLE")r(e,e.nodeValue);if(t!=1)return;var i=e.getAttribute("each");if(i){u(e,n,i);return false}p(e.attributes,function(t){var n=t.name,i=n.split("__")[1];r(e,t.value,{attr:i||n,bool:i});if(i){d(e,n);return false}});if(x(e))return false})}function a(t,i){var r=e.observable(this),u=b(i.opts)||{},a=m(t.tmpl),c=i.parent,l=[],d=[],g=i.root,h=i.item,y=t.fn,w={},x;if(y&&g.riot)return;g.riot=true;v(this,{parent:c,root:g,opts:u,tags:{}},h);p(g.attributes,function(e){w[e.name]=e.value});function C(e){p(Object.keys(w),function(e){u[e]=n(w[e],c||r)})}this.update=function(e,t){v(r,e,h);C();r.trigger("update",h);s(l,r,h);r.trigger("updated")};this.mount=function(){C();y&&y.call(r,u);N(true);f(a,r,l);r.update();r.trigger("premount");if(y){while(a.firstChild)g.appendChild(a.firstChild)}else{x=a.firstChild;g.insertBefore(x,i.before||null)}if(g.stub)r.root=g=c.root;r.trigger("mount")};this.unmount=function(){var e=y?g:x,t=e.parentNode;if(t){if(c)t.removeChild(e);else while(g.firstChild)g.removeChild(g.firstChild);N();r.trigger("unmount");r.off("*");delete g.riot}};function N(e){p(d,function(t){t[e?"mount":"unmount"]()});if(c){var t=e?"on":"off";c[t]("update",r.update)[t]("unmount",r.unmount)}}o(a,this,d)}function c(e,t,n,i,r){n[e]=function(e){e=e||window.event;e.which=e.which||e.charCode||e.keyCode;e.target=e.target||e.srcElement;e.currentTarget=n;e.item=r;if(t.call(i,e)!==true){e.preventDefault&&e.preventDefault();e.returnValue=false}var u=r?i.parent:i;u.update()}}function l(e,t,n){if(e){e.insertBefore(n,t);e.removeChild(t)}}function s(e,t,i){p(e,function(e){var r=e.dom,u=e.attr,o=n(e.expr,t),f=e.dom.parentNode;if(o==null)o="";if(f&&f.tagName=="TEXTAREA")o=o.replace(/riot-/g,"");if(e.value===o)return;e.value=o;if(!u)return r.nodeValue=o;d(r,u);if(typeof o=="function"){c(u,o,r,t,i)}else if(u=="if"){var a=e.stub;if(o){a&&l(a.parentNode,a,r)}else{a=e.stub=a||document.createTextNode("");l(r.parentNode,r,a)}}else if(/^(show|hide)$/.test(u)){if(u=="hide")o=!o;r.style.display=o?"":"none"}else if(u=="value"){r.value=o}else if(u.slice(0,5)=="riot-"){u=u.slice(5);o?r.setAttribute(u,o):d(r,u)}else{if(e.bool){r[u]=o;if(!o)return;o=u}if(typeof o!="object")r.setAttribute(u,o)}})}function p(e,t){for(var n=0,i=(e||[]).length,r;n<i;n++){r=e[n];if(r!=null&&t(r,n)===false)n--}return e}function d(e,t){e.removeAttribute(t)}function v(e,t,n){t&&p(Object.keys(t),function(n){e[n]=t[n]});return n?v(e,n):e}function m(e){var t=e.trim().slice(1,3).toLowerCase(),n=/td|th/.test(t)?"tr":t=="tr"?"tbody":"div",i=document.createElement(n);i.stub=true;i.innerHTML=e;return i}function g(e,t){if(e){if(t(e)===false)g(e.nextSibling,t);else{e=e.firstChild;while(e){g(e,t);e=e.nextSibling}}}}function h(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function b(e){function t(){}t.prototype=e;return new t}var y=[],w={};function x(e){return w[e.tagName.toLowerCase()]}function C(e){var t=document.createElement("style");t.innerHTML=e;document.head.appendChild(t)}function N(e,t,n){var i=w[t];if(i&&e)i=new a(i,{root:e,opts:n});if(i&&i.mount){i.mount();y.push(i);return i.on("unmount",function(){y.splice(y.indexOf(i),1)})}}e.tag=function(e,t,n,i){if(typeof n=="function")i=n;else if(n)C(n);w[e]={name:e,tmpl:t,fn:i}};e.mount=function(e,t,n){if(e=="*")e=Object.keys(w).join(", ");if(typeof t=="object"){n=t;t=0}var i=[];function r(e){var r=t||e.tagName.toLowerCase(),u=N(e,r,n);if(u)i.push(u)}if(e.tagName){r(e);return i[0]}else{p(document.querySelectorAll(e),r);return i}};e.update=function(){return p(y,function(e){e.update()})};e.mountTo=e.mount;e.util={brackets:t,tmpl:n};if(typeof exports==="object")module.exports=e;else if(typeof define==="function"&&define.amd)define(function(){return e});else this.riot=e})();


(function(e){var r=("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,"+"defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,"+"indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,"+"pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,"+"typemustmatch,visible").split(",");var t="area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr".split(",");var n=["style","src","d"];var i={jade:O};var c={coffeescript:y,none:E,cs:y,es6:w,typescript:k,livescript:q,ls:q};var o=/^<([\w\-]+)>(.*)<\/\1>/gim,a=/=({[^}]+})([\s\/\>])/g,s=/([\w\-]+)=(["'])([^\2]+?)\2/g,u=/{\s*([^}]+)\s*}/g,l=/^<([\w\-]+)>([^\x00]*[\w\/}]>$)?([^\x00]*?)^<\/\1>/gim,f=/<script(\s+type=['"]?([^>'"]+)['"]?)?>([^\x00]*?)<\/script>/gm,p=/<style(\s+type=['"]?([^>'"]+)['"]?|\s+scoped)?>([^\x00]*?)<\/style>/gm,d=/(^|\}|\{)\s*([^\{\}]+)\s*(?=\{)/g,m=/\/\*[^\x00]*?\*\//gm,g=/<!--.*?-->/g,v=/<([\w\-]+)([^>]*)\/\s*>/g,h=/^\s*\/\/.*$/gm,b=/\/\*[^\x00]*?\*\//gm;function x(e,i,c){var o=riot.util.brackets;e=i.whitespace?e.replace(/\n/g,"\\n"):e.replace(/\s+/g," ");e=e.trim().replace(g,"");e=e.replace(o(a),'="$1"$2');e=e.replace(s,function(e,t,i,c){if(c.indexOf(o(0))>=0){t=t.toLowerCase();if(n.indexOf(t)>=0)t="riot-"+t;else if(r.indexOf(t)>=0)t="__"+t}return t+'="'+c+'"'});if(i.expr){e=e.replace(o(u),function(e,r){var t=L(r,i,c).trim().replace(/\r?\n|\r/g,"").trim();if(t.slice(-1)==";")t=t.slice(0,-1);return o(0)+t+o(1)})}e=e.replace(v,function(e,r,n){var i="<"+r+(n?" "+n.trim():"")+">";if(t.indexOf(r.toLowerCase())==-1)i+="</"+r+">";return i});e=e.replace(/'/g,"\\'");e=e.replace(o(/\\{|\\}/g),"\\$&");if(i.compact)e=e.replace(/> </g,"><");return e}function y(e){return require("coffee-script").compile(e,{bare:true})}function w(e){return require("babel").transform(e,{blacklist:["useStrict"]}).code}function k(e){return require("typescript-simple")(e)}function q(e){return require("LiveScript").compile(e,{bare:true,header:false})}function E(e){return e}function O(e){return require("jade").render(e,{pretty:true})}function T(e){e=e.replace(h,"").replace(b,"");var r=e.split("\n"),t="";r.forEach(function(e,n){var i=e.trim();if(i[0]!="}"&&i.indexOf("(")>0&&i.indexOf("function")==-1){var c=/[{}]/.exec(i.slice(-1)),o=c&&/(\s+)([\w]+)\s*\(([\w,\s]*)\)\s*\{/.exec(e);if(o&&!/^(if|while|switch|for)$/.test(o[2])){r[n]=o[1]+"this."+o[2]+" = function("+o[3]+") {";if(c[0]=="}"){r[n]+=" "+i.slice(o[0].length-1,-1)+"}.bind(this)"}else{t=o[1]}}}if(e.slice(0,t.length+1)==t+"}"){r[n]=t+"}.bind(this);";t=""}});return r.join("\n")}function $(e,r){return r.replace(m,"").replace(d,function(r,t,n){return t+" "+n.split(/\s*,\s*/g).map(function(r){return r[0]=="@"?r:e+" "+r.replace(/:scope\s*/,"")}).join(",")}).trim()}function L(e,r,t){var n=r.parser||(t?c[t]:T);if(!n)throw new Error('Parser not found "'+t+'"');return n(e,r)}function j(e,r){var t=i[e];if(!t)throw new Error('Template parser not found "'+e+'"');return t(r)}function C(e,r,t){if(t=="scoped-css")e=$(r,e);return e.replace(/\s+/g," ").replace(/\\/g,"\\\\").replace(/'/g,"\\'").trim()}function S(e,r,t,n){return"riot.tag('"+e+"', '"+r+"'"+(t?", '"+t+"'":"")+", function(opts) {"+n+"\n});"}function R(e,r){r=r||{};if(r.brackets)riot.settings.brackets=r.brackets;if(r.template)e=j(r.template,e);e=e.replace(o,function(e,t,n){return S(t,x(n,r),"","")});return e.replace(l,function(e,t,n,i){n=n||"";var c=r.type;if(!i.trim()){n=n.replace(f,function(e,r,t,n){if(t)c=t.replace("text/","");i=n;return""})}var o="";var a="css";n=n.replace(p,function(e,r,t,n){if(r&&"scoped"==r.trim())a="scoped-css";else if(t)a=t.replace("text/","");o=n;return""});return S(t,x(n,r,c),C(o,t,a),L(i,r,c))})}if(e){this.riot=require(process.env.RIOT||"../riot");return module.exports={html:x,compile:R,style:C}}var A=document,H,M;function _(e,r){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4&&t.status==200)r(t.responseText)};t.open("GET",e,true);t.send("")}function z(e){var r=/[ \t]+/.exec(e);if(r)e=e.replace(new RegExp("^"+r[0],"gm"),"");return e}function G(e){var r=A.createElement("script"),t=A.documentElement;r.text=R(e);t.appendChild(r);t.removeChild(r)}function I(e){var r=A.querySelectorAll('script[type="riot/tag"]');[].map.call(r,function(t,n){var i=t.getAttribute("src");function c(t){G(t);if(n+1==r.length){H.trigger("ready");M=true;e&&e()}}return i?_(i,c):c(z(t.innerHTML))})}riot.compile=function(e,r){if(typeof e=="string"){if(e.trim()[0]=="<"){var t=z(R(e));if(!r)G(t);return t}else{return _(e,function(e){var t=z(R(e));G(t);r&&r(t,e)})}}if(typeof e!="function")e=undefined;if(M)return e&&e();if(H){e&&H.on("ready",e)}else{H=riot.observable();I(e)}};var P=riot.mount;riot.mount=function(e,r,t){var n;riot.compile(function(){n=P(e,r,t)});return n};riot.mountTo=riot.mount})(!this.top);

